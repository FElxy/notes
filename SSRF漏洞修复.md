漏洞原理
SSRF（Server-Side Request Forgery，服务端请求伪造）是指攻击者向服务端发送包含恶意 URL 链接的请求，借由服务端去访问此 URL ，以获取受保护网络内的资源的一种安全漏洞。SSRF 的实质是利用存在缺陷的 Web 应用作为代理攻击远程和本地的服务器。SSRF 常被用于探测攻击者无法访问到的网络区域，比如服务器所在的内网，或是受防火墙访问限制的主机。SSRF 的产生，主要是因为在服务端的 Web 应用，需要从其他服务器拉取数据资源，比如图片、视频、文件的上传/下载、业务数据处理结果，但其请求地址可被外部用户控制。
当攻击者可以控制或猜测出其他服务器的 URL 地址时，他们可以通过修改自己的请求地址来访问或影响其他服务器的资源或状态。
这样就会造成严重的安全风险，攻击者可以利用 SSRF 来扫描内部网络，获取端口，服务信息，窃取本地和内网敏感数据，攻击服务器本地或内网应用，绕过安全防御，甚至发起拒绝服务攻击。

修复方案
最简单有效的修复方式就是在 Web 应用程序中禁止从其他服务器拉取数据资源，或者只允许从白名单中指定的可信任服务器拉取数据资源。

如果必须允许从其他服务器拉取数据资源，那么应该对请求地址进行严格的过滤和限制，例如：

检查请求地址是否合法，是否包含危险字符或协议（如 file://、gopher://、dict:// 等）；

检查请求地址是否属于白名单中指定的域名或 IP 地址范围；

检查请求地址是否能够解析为内网或本地 IP 地址（如 127.0.0.1、10.x.x.x、192.168.x.x 等）；

检查请求地址是否能够解析为特殊 IP 地址（如 0.0.0.0、255.255.255.255 等）；

检查请求地址是否包含欺骗性的内容（如 127.1.1.1@127.2.2.2、evil$google.com、google.com#@evil.com 等）；

检查请求地址是否包含跳转或重定向（如 302 Location: dict://lagou.com 等）；

检查请求地址是否包含 Unicode 转换（如 evil.c℀.office.com 等）。

另外，还应该对请求结果进行有效性和完整性检查，以防止被篡改或污染，并且应该设置合理的请求超时时间和大小限制，以减少被拒绝服务攻击的可能性。

